---
import Badge from "../Badge.astro";
import SectionContainer from "../SectionContainer.astro";

// Importar la colecciÃ³n de Experiencias Laborales
import { getCollection, type CollectionEntry } from "astro:content";
type Experience = CollectionEntry<"experiences">;

const experiences: Experience[] = (await getCollection("experiences")).sort(
  (a: Experience, b: Experience) => a.data.id - b.data.id
);
---

<SectionContainer id="experiencia" class="pt-10">
  <h2 class="text-4xl sm:text-6xl font-bold mb-3">Experiencia Laboral ðŸ’¼</h2>

  <!-- Renderizar las experiencias -->
  {
    experiences.map((experience: Experience) => (
      <section class="mb-12">
        {/* Detalle del trabajo */}
        <div class="flex gap-2 items-center mb-2">
          <a href={experience.data.webPage} target="_blank" class="transition-smooth">
          <h3 class="text-3xl font-semibold text-pink-400 italic mr-2">
            {experience.data.company}
          </h3>
          </a>
          {/* Recorrer las "posiciones" del cargo */}
          {experience.data.position.map((item: string) => (
            <Badge>{item}</Badge>
          ))}
        </div>

        <span class="text-xl">{experience.data.starDate} - {experience.data.endDate}</span>

        {/* <!-- Funciones del Cargo --> */}
        <article class="mt-4">
          <span class="text-2xl font-semibold text-pink-200">
            Funciones del cargo
          </span>

          <ul class="list-disc list-outside pl-6">
            {experience.data.duties.map((item: string) => (
              <li class="text-xl">{item}</li>
            ))}
          </ul>
        </article>

        {/* <!-- Responsabilidades del cargo --> */}
        <article class="mt-4">
          <span class="text-2xl font-semibold text-pink-200">
            Responsabilidades como {experience.data.position}
          </span>
          <ul class="list-disc list-outside pl-6">
            {experience.data.responsibilities.map((item: string) => (
              <li class="text-xl">{item}</li>
            ))}
          </ul>
        </article>

        {/* <!-- Herramientas y TeconolgÃ­as utilizadas --> */}
        <article class="mt-4">
          <span class="text-2xl font-semibold text-pink-200">Herramientas</span>
          <div class="flex gap-1 mt-2">
            <span class="inline-flex gap-4 w-14 h-14">
              {experience.data.toolsIcons.map((icon: any) => (
                <img src={icon.src} alt={icon.alt} class="w-full h-full transition-smooth" />
              ))}
            </span>
          </div>
        </article>
      </section>
    ))
  }
</SectionContainer>
